import{y as pe,c as Y,d as Q,z as Be,a as d,n as W,A as K,C as $,D as se,w as J,E as Te,G as Me,f as Pe,H as Ae,J as Re,m as D,K as Le,e as qe,u as ze,L as Fe,r as R,M as Ne,N as B,O as ae,P as Oe,Q as $e,R as De,S as N,T as We,U as Qe,V as T,W as re,X as je,I as U,b as ce,s as ue,Y as Ue,F as Ge,Z as He,$ as Ke,o as Ye,g as Je,q as E,l as G,j as O,B as Xe,v as Ze,x as et,_ as tt}from"./index-DcSzU1BN.js";import{s as nt,a as at}from"./index-BfPAezUI.js";import{c as rt,C as lt}from"./index-CZ2rERth.js";import{a as de,b as it}from"./mount-component-DfGsuC5f.js";import{s as ot}from"./function-call-BbtWbCUU.js";let st=0;function ct(){const e=pe(),{name:n="unknown"}=(e==null?void 0:e.type)||{};return`${n}-${++st}`}const[ut,dt]=Y("form"),ft={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:W,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:K,showErrorMessage:K,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var gt=Q({name:ut,props:ft,emits:["submit","failed"],setup(e,{emit:n,slots:o}){const{children:c,linkChildren:i}=Be(se),s=a=>a?c.filter(u=>a.includes(u.name)):c,S=a=>new Promise((u,h)=>{const V=[];s(a).reduce((j,P)=>j.then(()=>{if(!V.length)return P.validate().then(A=>{A&&V.push(A)})}),Promise.resolve()).then(()=>{V.length?h(V):u()})}),I=a=>new Promise((u,h)=>{const V=s(a);Promise.all(V.map(b=>b.validate())).then(b=>{b=b.filter(Boolean),b.length?h(b):u()})}),v=a=>{const u=c.find(h=>h.name===a);return u?new Promise((h,V)=>{u.validate().then(b=>{b?V(b):h()})}):Promise.reject()},C=a=>typeof a=="string"?v(a):e.validateFirst?S(a):I(a),g=a=>{typeof a=="string"&&(a=[a]),s(a).forEach(h=>{h.resetValidation()})},y=()=>c.reduce((a,u)=>(a[u.name]=u.getValidationStatus(),a),{}),M=(a,u)=>{c.some(h=>h.name===a?(h.$el.scrollIntoView(u),!0):!1)},L=()=>c.reduce((a,u)=>(u.name!==void 0&&(a[u.name]=u.formValue.value),a),{}),q=()=>{const a=L();C().then(()=>n("submit",a)).catch(u=>{n("failed",{values:a,errors:u}),e.scrollToError&&u[0].name&&M(u[0].name)})},p=a=>{$(a),q()};return i({props:e}),de({submit:q,validate:C,getValues:L,scrollToField:M,resetValidation:g,getValidationStatus:y}),()=>{var a;return d("form",{class:dt(),onSubmit:p},[(a=o.default)==null?void 0:a.call(o)])}}});const mt=J(gt);function fe(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function ht(e,n){if(fe(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function vt(e,n){return new Promise(o=>{const c=n.validator(e,n);if(Ae(c)){c.then(o);return}o(c)})}function le(e,n){const{message:o}=n;return Re(o)?o(e,n):o||""}function bt({target:e}){e.composing=!0}function ie({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function _t(e,n){const o=Te();e.style.height="auto";let c=e.scrollHeight;if(Pe(n)){const{maxHeight:i,minHeight:s}=n;i!==void 0&&(c=Math.min(c,i)),s!==void 0&&(c=Math.max(c,s))}c&&(e.style.height=`${c}px`,Me(o))}function yt(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function k(e){return[...e].length}function H(e,n){return[...e].slice(0,n).join("")}const[wt,w]=Y("field"),St={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:W,formatter:Function,clearIcon:D("clear"),modelValue:Le(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:D("focus"),formatTrigger:D("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},Ct=qe({},rt,St,{rows:W,type:D("text"),rules:Array,autosize:[Boolean,Object],labelWidth:W,labelClass:ze,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var xt=Q({name:wt,props:Ct,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:o}){const c=ct(),i=Fe({status:"unvalidated",focused:!1,validateMessage:""}),s=R(),S=R(),I=R(),{parent:v}=Ne(se),C=()=>{var t;return String((t=e.modelValue)!=null?t:"")},g=t=>{if(T(e[t]))return e[t];if(v&&T(v.props[t]))return v.props[t]},y=B(()=>{const t=g("readonly");if(e.clearable&&!t){const r=C()!=="",l=e.clearTrigger==="always"||e.clearTrigger==="focus"&&i.focused;return r&&l}return!1}),M=B(()=>I.value&&o.input?I.value():e.modelValue),L=B(()=>{var t;const r=g("required");return r==="auto"?(t=e.rules)==null?void 0:t.some(l=>l.required):r}),q=t=>t.reduce((r,l)=>r.then(()=>{if(i.status==="failed")return;let{value:f}=M;if(l.formatter&&(f=l.formatter(f,l)),!ht(f,l)){i.status="failed",i.validateMessage=le(f,l);return}if(l.validator)return fe(f)&&l.validateEmpty===!1?void 0:vt(f,l).then(m=>{m&&typeof m=="string"?(i.status="failed",i.validateMessage=m):m===!1&&(i.status="failed",i.validateMessage=le(f,l))})}),Promise.resolve()),p=()=>{i.status="unvalidated",i.validateMessage=""},a=()=>n("endValidate",{status:i.status,message:i.validateMessage}),u=(t=e.rules)=>new Promise(r=>{p(),t?(n("startValidate"),q(t).then(()=>{i.status==="failed"?(r({name:e.name,message:i.validateMessage}),a()):(i.status="passed",r(),a())})):r()}),h=t=>{if(v&&e.rules){const{validateTrigger:r}=v.props,l=re(r).includes(t),f=e.rules.filter(m=>m.trigger?re(m.trigger).includes(t):l);f.length&&u(f)}},V=t=>{var r;const{maxlength:l}=e;if(T(l)&&k(t)>+l){const f=C();if(f&&k(f)===+l)return f;const m=(r=s.value)==null?void 0:r.selectionEnd;if(i.focused&&m){const _=[...t],x=_.length-+l;return _.splice(m-x,x),_.join("")}return H(t,+l)}return t},b=(t,r="onChange")=>{const l=t;t=V(t);const f=k(l)-k(t);if(e.type==="number"||e.type==="digit"){const _=e.type==="number";t=je(t,_,_)}let m=0;if(e.formatter&&r===e.formatTrigger){const{formatter:_,maxlength:x}=e;if(t=_(t),T(x)&&k(t)>+x&&(t=H(t,+x)),s.value&&i.focused){const{selectionEnd:F}=s.value,ne=H(l,F);m=k(_(ne))-k(ne)}}if(s.value&&s.value.value!==t)if(i.focused){let{selectionStart:_,selectionEnd:x}=s.value;if(s.value.value=t,T(_)&&T(x)){const F=k(t);f?(_-=f,x-=f):m&&(_+=m,x+=m),s.value.setSelectionRange(Math.min(_,F),Math.min(x,F))}}else s.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},j=t=>{t.target.composing||b(t.target.value)},P=()=>{var t;return(t=s.value)==null?void 0:t.blur()},A=()=>{var t;return(t=s.value)==null?void 0:t.focus()},z=()=>{const t=s.value;e.type==="textarea"&&e.autosize&&t&&_t(t,e.autosize)},ge=t=>{i.focused=!0,n("focus",t),N(z),g("readonly")&&P()},me=t=>{i.focused=!1,b(C(),"onBlur"),n("blur",t),!g("readonly")&&(h("onBlur"),N(z),Ue())},Z=t=>n("clickInput",t),he=t=>n("clickLeftIcon",t),ve=t=>n("clickRightIcon",t),be=t=>{$(t),n("update:modelValue",""),n("clear",t)},ee=B(()=>{if(typeof e.error=="boolean")return e.error;if(v&&v.props.showError&&i.status==="failed")return!0}),_e=B(()=>{const t=g("labelWidth"),r=g("labelAlign");if(t&&r!=="top")return{width:ae(t)}}),ye=t=>{t.keyCode===13&&(!(v&&v.props.submitOnEnter)&&e.type!=="textarea"&&$(t),e.type==="search"&&P()),n("keypress",t)},te=()=>e.id||`${c}-input`,we=()=>i.status,Se=()=>{const t=w("control",[g("inputAlign"),{error:ee.value,custom:!!o.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(o.input)return d("div",{class:t,onClick:Z},[o.input()]);const r={id:te(),ref:s,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:g("disabled"),readonly:g("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${c}-label`:void 0,onBlur:me,onFocus:ge,onInput:j,onClick:Z,onChange:ie,onKeypress:ye,onCompositionend:ie,onCompositionstart:bt};return e.type==="textarea"?d("textarea",r,null):d("input",ce(yt(e.type),r),null)},Ce=()=>{const t=o["left-icon"];if(e.leftIcon||t)return d("div",{class:w("left-icon"),onClick:he},[t?t():d(U,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},xe=()=>{const t=o["right-icon"];if(e.rightIcon||t)return d("div",{class:w("right-icon"),onClick:ve},[t?t():d(U,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Ve=()=>{if(e.showWordLimit&&e.maxlength){const t=k(C());return d("div",{class:w("word-limit")},[d("span",{class:w("word-num")},[t]),ue("/"),e.maxlength])}},Ie=()=>{if(v&&v.props.showErrorMessage===!1)return;const t=e.errorMessage||i.validateMessage;if(t){const r=o["error-message"],l=g("errorMessageAlign");return d("div",{class:w("error-message",l)},[r?r({message:t}):t])}},ke=()=>{const t=g("labelWidth"),r=g("labelAlign"),l=g("colon")?":":"";if(o.label)return[o.label(),l];if(e.label)return d("label",{id:`${c}-label`,for:o.input?void 0:te(),onClick:f=>{$(f),A()},style:r==="top"&&t?{width:ae(t)}:void 0},[e.label+l])},Ee=()=>[d("div",{class:w("body")},[Se(),y.value&&d(U,{ref:S,name:e.clearIcon,class:w("clear")},null),xe(),o.button&&d("div",{class:w("button")},[o.button()])]),Ve(),Ie()];return de({blur:P,focus:A,validate:u,formValue:M,resetValidation:p,getValidationStatus:we}),Oe($e,{customValue:I,resetValidation:p,validateWithTrigger:h}),De(()=>e.modelValue,()=>{b(C()),p(),h("onChange"),N(z)}),We(()=>{b(C(),e.formatTrigger),N(z)}),Qe("touchstart",be,{target:B(()=>{var t;return(t=S.value)==null?void 0:t.$el})}),()=>{const t=g("disabled"),r=g("labelAlign"),l=Ce(),f=()=>{const m=ke();return r==="top"?[l,m].filter(Boolean):m||[]};return d(lt,{size:e.size,class:w({error:ee.value,disabled:t,[`label-${r}`]:r}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:_e.value,valueClass:w("value"),titleClass:[w("label",[r,{required:L.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:l&&r!=="top"?()=>l:null,title:f,value:Ee,extra:o.extra})}}});const Vt=J(xt),[It,oe]=Y("cell-group"),kt={title:String,inset:Boolean,border:K};var Et=Q({name:It,inheritAttrs:!1,props:kt,setup(e,{slots:n,attrs:o}){const c=()=>{var s;return d("div",ce({class:[oe({inset:e.inset}),{[He]:e.border&&!e.inset}]},o,it()),[(s=n.default)==null?void 0:s.call(n)])},i=()=>d("div",{class:oe("title",{inset:e.inset})},[n.title?n.title():e.title]);return()=>e.title||n.title?d(Ge,null,[i(),c()]):c()}});const pt=J(Et),X=e=>(Ze("data-v-9a29dfc4"),e=e(),et(),e),Bt={class:"login"},Tt=X(()=>E("h3",{class:"title"},"微信号/QQ号/邮箱登录",-1)),Mt={class:"form"},Pt={class:"footer"},At=X(()=>E("div",{class:"tips"},"上述微信号/QQ号/邮箱仅用于登录验证",-1)),Rt=X(()=>E("div",{class:"safe flex middle between"},[E("a",{href:"https://weixin110.qq.com/security/newreadtemplate?t=findpasswd/index&from=sec&wechat_real_lang=zh_CN#/"},"找回密码"),E("a",{href:"https://weixin110.qq.com/security/acct/newreadtemplate?t=frozen/index&from=sec&wechat_real_lang=zh_CN#/"},"紧急冻结"),E("a",{href:"https://weixin110.qq.com/security/newreadtemplate?t=w_security_center_website/newindex&lang=zh_CN"},"安全中心")],-1)),Lt=Q({__name:"wx",setup(e){let n=R({username:"",password:""}),o=R(null);const c=Ke();async function i(){var s;try{let S=await((s=o.value)==null?void 0:s.validate());nt({message:"登录中...",forbidClick:!0,duration:3e3,async onClose(){try{await ot({title:"唉!",message:`这是一个模拟的钓鱼网站,\r
你可以在这里体验到一些钓鱼网站的流程,\r
方便以后能够辨认,\r
但是你刚才输入了账号密码,\r
如果这个是一个真的钓鱼网站,\r
你就已经中招了!!!`,showCancelButton:!0,confirmButtonText:"做题,避免再中招",cancelButtonText:"不想做,关闭",messageAlign:"left"}),c.push("/test/home")}catch{}}})}catch{at("请填写正确信息")}}return(s,S)=>{const I=Vt,v=pt,C=mt,g=Xe;return Ye(),Je("div",Bt,[Tt,E("div",Mt,[d(C,{ref_key:"formRef",ref:o},{default:G(()=>[d(v,{inset:""},{default:G(()=>[d(I,{modelValue:O(n).username,"onUpdate:modelValue":S[0]||(S[0]=y=>O(n).username=y),name:"账号",label:"账号",placeholder:"请填写微信号/QQ号/邮箱",clearable:"",rules:[{required:!0,message:"请填写微信号/QQ号/邮箱"},{validator:y=>{if(y.length<6||y.length>20)return"账号长度不正确"},message:"账号长度不正确"}]},null,8,["modelValue","rules"]),d(I,{modelValue:O(n).password,"onUpdate:modelValue":S[1]||(S[1]=y=>O(n).password=y),type:"password",name:"密码",label:"密码",placeholder:"请填写密码",clearable:"",rules:[{required:!0,message:"请填写密码"},{validator:y=>{if(y.length<6||y.length>20)return"密码长度不正确"},message:"密码长度不正确"}]},null,8,["modelValue","rules"])]),_:1})]),_:1},512)]),E("div",Pt,[At,d(g,{type:"success",size:"small",onClick:i},{default:G(()=>[ue("同意并登录")]),_:1}),Rt])])}}}),$t=tt(Lt,[["__scopeId","data-v-9a29dfc4"]]);export{$t as default};
