import{P as z,m as M,u as N}from"./mount-component-BsIUfqY6.js";import{c as L,p as j,m as k,n as v,N as U,u as C,I as V,L as q,b as D,e as h,i as F,a as H,w as _}from"./index-1IMyRTzM.js";import{d as A,n as w,s as E,I as G,c as s,m as O,r as J,i as K}from"./index-BUDJbm-d.js";let d=0;function Q(e){e?(d||document.body.classList.add("van-toast--unclickable"),d++):d&&(d--,d||document.body.classList.remove("van-toast--unclickable"))}const[R,l]=L("toast"),W=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],X={icon:String,show:Boolean,type:k("text"),overlay:Boolean,message:v,iconSize:v,duration:U(2e3),position:k("middle"),teleport:[String,Object],wordBreak:String,className:C,iconPrefix:String,transition:k("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:C,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:v};var S=A({name:R,props:X,emits:["update:show"],setup(e,{emit:a,slots:o}){let u,i=!1;const c=()=>{const n=e.show&&e.forbidClick;i!==n&&(i=n,Q(i))},r=n=>a("update:show",n),y=()=>{e.closeOnClick&&r(!1)},f=()=>clearTimeout(u),m=()=>{const{icon:n,type:t,iconSize:p,iconPrefix:T,loadingType:B}=e;if(n||t==="success"||t==="fail")return s(V,{name:n||t,size:p,class:l("icon"),classPrefix:T},null);if(t==="loading")return s(q,{class:l("loading"),size:p,type:B},null)},I=()=>{const{type:n,message:t}=e;if(o.message)return s("div",{class:l("text")},[o.message()]);if(D(t)&&t!=="")return n==="html"?s("div",{key:0,class:l("text"),innerHTML:String(t)},null):s("div",{class:l("text")},[t])};return w(()=>[e.show,e.forbidClick],c),w(()=>[e.show,e.type,e.message,e.duration],()=>{f(),e.show&&e.duration>0&&(u=setTimeout(()=>{r(!1)},e.duration))}),E(c),G(c),()=>s(z,O({class:[l([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:y,onClosed:f,"onUpdate:show":r},j(e,W)),{default:()=>[m(),I()]})}});const Y={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let g=[],Z=!1,b=h({},Y);const $=new Map;function P(e){return H(e)?e:{message:e}}function ee(){const{instance:e,unmount:a}=M({setup(){const o=J(""),{open:u,state:i,close:c,toggle:r}=N(),y=()=>{},f=()=>s(S,O(i,{onClosed:y,"onUpdate:show":r}),null);return w(o,m=>{i.message=m}),K().render=f,{open:u,close:c,message:o}}});return e}function ne(){if(!g.length||Z){const e=ee();g.push(e)}return g[g.length-1]}function te(e={}){if(!F)return{};const a=ne(),o=P(e);return a.open(h({},b,$.get(o.type||b.type),o)),a}const x=e=>a=>te(h({type:e},P(a))),le=x("loading"),ce=x("fail");_(S);export{ce as a,te as b,le as s};
