import{s as Be}from"./index-DMMOGL-Y.js";import{s as Te,a as pe}from"./index-DxfqEgN6.js";import{y as Me,c as Y,d as W,z as Pe,a as f,n as D,A as K,C as O,D as se,w as J,E as Ae,G as Le,f as Re,H as qe,J as ze,m as $,K as Fe,e as Ne,u as Oe,L as $e,r as A,M as De,N as B,O as ae,P as We,Q as Qe,R as je,S as F,T as Ue,U as Ge,V as T,W as re,X as He,I as U,b as ce,s as ue,Y as Ke,F as Ye,Z as Je,o as Xe,g as Ze,q as V,l as G,j as N,B as et,v as tt,x as nt,_ as at}from"./index-DrH4ebPx.js";import{c as rt,C as lt}from"./index-C2AkuUHq.js";import{a as de,b as it}from"./mount-component-BRwBUCyJ.js";let ot=0;function st(){const e=Me(),{name:n="unknown"}=(e==null?void 0:e.type)||{};return`${n}-${++ot}`}const[ct,ut]=Y("form"),dt={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:D,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:K,showErrorMessage:K,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var ft=W({name:ct,props:dt,emits:["submit","failed"],setup(e,{emit:n,slots:o}){const{children:u,linkChildren:r}=Pe(se),s=a=>a?u.filter(d=>a.includes(d.name)):u,I=a=>new Promise((d,h)=>{const x=[];s(a).reduce((j,M)=>j.then(()=>{if(!x.length)return M.validate().then(P=>{P&&x.push(P)})}),Promise.resolve()).then(()=>{x.length?h(x):d()})}),k=a=>new Promise((d,h)=>{const x=s(a);Promise.all(x.map(b=>b.validate())).then(b=>{b=b.filter(Boolean),b.length?h(b):d()})}),v=a=>{const d=u.find(h=>h.name===a);return d?new Promise((h,x)=>{d.validate().then(b=>{b?x(b):h()})}):Promise.reject()},w=a=>typeof a=="string"?v(a):e.validateFirst?I(a):k(a),c=a=>{typeof a=="string"&&(a=[a]),s(a).forEach(h=>{h.resetValidation()})},Q=()=>u.reduce((a,d)=>(a[d.name]=d.getValidationStatus(),a),{}),p=(a,d)=>{u.some(h=>h.name===a?(h.$el.scrollIntoView(d),!0):!1)},L=()=>u.reduce((a,d)=>(d.name!==void 0&&(a[d.name]=d.formValue.value),a),{}),R=()=>{const a=L();w().then(()=>n("submit",a)).catch(d=>{n("failed",{values:a,errors:d}),e.scrollToError&&d[0].name&&p(d[0].name)})},E=a=>{O(a),R()};return r({props:e}),de({submit:R,validate:w,getValues:L,scrollToField:p,resetValidation:c,getValidationStatus:Q}),()=>{var a;return f("form",{class:ut(),onSubmit:E},[(a=o.default)==null?void 0:a.call(o)])}}});const gt=J(ft);function fe(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function mt(e,n){if(fe(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function ht(e,n){return new Promise(o=>{const u=n.validator(e,n);if(qe(u)){u.then(o);return}o(u)})}function le(e,n){const{message:o}=n;return ze(o)?o(e,n):o||""}function vt({target:e}){e.composing=!0}function ie({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function bt(e,n){const o=Ae();e.style.height="auto";let u=e.scrollHeight;if(Re(n)){const{maxHeight:r,minHeight:s}=n;r!==void 0&&(u=Math.min(u,r)),s!==void 0&&(u=Math.max(u,s))}u&&(e.style.height=`${u}px`,Le(o))}function _t(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function C(e){return[...e].length}function H(e,n){return[...e].slice(0,n).join("")}const[yt,y]=Y("field"),wt={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:D,formatter:Function,clearIcon:$("clear"),modelValue:Fe(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:$("focus"),formatTrigger:$("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},St=Ne({},rt,wt,{rows:D,type:$("text"),rules:Array,autosize:[Boolean,Object],labelWidth:D,labelClass:Oe,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var xt=W({name:yt,props:St,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:o}){const u=st(),r=$e({status:"unvalidated",focused:!1,validateMessage:""}),s=A(),I=A(),k=A(),{parent:v}=De(se),w=()=>{var t;return String((t=e.modelValue)!=null?t:"")},c=t=>{if(T(e[t]))return e[t];if(v&&T(v.props[t]))return v.props[t]},Q=B(()=>{const t=c("readonly");if(e.clearable&&!t){const l=w()!=="",i=e.clearTrigger==="always"||e.clearTrigger==="focus"&&r.focused;return l&&i}return!1}),p=B(()=>k.value&&o.input?k.value():e.modelValue),L=B(()=>{var t;const l=c("required");return l==="auto"?(t=e.rules)==null?void 0:t.some(i=>i.required):l}),R=t=>t.reduce((l,i)=>l.then(()=>{if(r.status==="failed")return;let{value:g}=p;if(i.formatter&&(g=i.formatter(g,i)),!mt(g,i)){r.status="failed",r.validateMessage=le(g,i);return}if(i.validator)return fe(g)&&i.validateEmpty===!1?void 0:ht(g,i).then(m=>{m&&typeof m=="string"?(r.status="failed",r.validateMessage=m):m===!1&&(r.status="failed",r.validateMessage=le(g,i))})}),Promise.resolve()),E=()=>{r.status="unvalidated",r.validateMessage=""},a=()=>n("endValidate",{status:r.status,message:r.validateMessage}),d=(t=e.rules)=>new Promise(l=>{E(),t?(n("startValidate"),R(t).then(()=>{r.status==="failed"?(l({name:e.name,message:r.validateMessage}),a()):(r.status="passed",l(),a())})):l()}),h=t=>{if(v&&e.rules){const{validateTrigger:l}=v.props,i=re(l).includes(t),g=e.rules.filter(m=>m.trigger?re(m.trigger).includes(t):i);g.length&&d(g)}},x=t=>{var l;const{maxlength:i}=e;if(T(i)&&C(t)>+i){const g=w();if(g&&C(g)===+i)return g;const m=(l=s.value)==null?void 0:l.selectionEnd;if(r.focused&&m){const _=[...t],S=_.length-+i;return _.splice(m-S,S),_.join("")}return H(t,+i)}return t},b=(t,l="onChange")=>{const i=t;t=x(t);const g=C(i)-C(t);if(e.type==="number"||e.type==="digit"){const _=e.type==="number";t=He(t,_,_)}let m=0;if(e.formatter&&l===e.formatTrigger){const{formatter:_,maxlength:S}=e;if(t=_(t),T(S)&&C(t)>+S&&(t=H(t,+S)),s.value&&r.focused){const{selectionEnd:z}=s.value,ne=H(i,z);m=C(_(ne))-C(ne)}}if(s.value&&s.value.value!==t)if(r.focused){let{selectionStart:_,selectionEnd:S}=s.value;if(s.value.value=t,T(_)&&T(S)){const z=C(t);g?(_-=g,S-=g):m&&(_+=m,S+=m),s.value.setSelectionRange(Math.min(_,z),Math.min(S,z))}}else s.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},j=t=>{t.target.composing||b(t.target.value)},M=()=>{var t;return(t=s.value)==null?void 0:t.blur()},P=()=>{var t;return(t=s.value)==null?void 0:t.focus()},q=()=>{const t=s.value;e.type==="textarea"&&e.autosize&&t&&bt(t,e.autosize)},ge=t=>{r.focused=!0,n("focus",t),F(q),c("readonly")&&M()},me=t=>{r.focused=!1,b(w(),"onBlur"),n("blur",t),!c("readonly")&&(h("onBlur"),F(q),Ke())},Z=t=>n("clickInput",t),he=t=>n("clickLeftIcon",t),ve=t=>n("clickRightIcon",t),be=t=>{O(t),n("update:modelValue",""),n("clear",t)},ee=B(()=>{if(typeof e.error=="boolean")return e.error;if(v&&v.props.showError&&r.status==="failed")return!0}),_e=B(()=>{const t=c("labelWidth"),l=c("labelAlign");if(t&&l!=="top")return{width:ae(t)}}),ye=t=>{t.keyCode===13&&(!(v&&v.props.submitOnEnter)&&e.type!=="textarea"&&O(t),e.type==="search"&&M()),n("keypress",t)},te=()=>e.id||`${u}-input`,we=()=>r.status,Se=()=>{const t=y("control",[c("inputAlign"),{error:ee.value,custom:!!o.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(o.input)return f("div",{class:t,onClick:Z},[o.input()]);const l={id:te(),ref:s,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:c("disabled"),readonly:c("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${u}-label`:void 0,onBlur:me,onFocus:ge,onInput:j,onClick:Z,onChange:ie,onKeypress:ye,onCompositionend:ie,onCompositionstart:vt};return e.type==="textarea"?f("textarea",l,null):f("input",ce(_t(e.type),l),null)},xe=()=>{const t=o["left-icon"];if(e.leftIcon||t)return f("div",{class:y("left-icon"),onClick:he},[t?t():f(U,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},Ce=()=>{const t=o["right-icon"];if(e.rightIcon||t)return f("div",{class:y("right-icon"),onClick:ve},[t?t():f(U,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Ve=()=>{if(e.showWordLimit&&e.maxlength){const t=C(w());return f("div",{class:y("word-limit")},[f("span",{class:y("word-num")},[t]),ue("/"),e.maxlength])}},Ie=()=>{if(v&&v.props.showErrorMessage===!1)return;const t=e.errorMessage||r.validateMessage;if(t){const l=o["error-message"],i=c("errorMessageAlign");return f("div",{class:y("error-message",i)},[l?l({message:t}):t])}},ke=()=>{const t=c("labelWidth"),l=c("labelAlign"),i=c("colon")?":":"";if(o.label)return[o.label(),i];if(e.label)return f("label",{id:`${u}-label`,for:o.input?void 0:te(),onClick:g=>{O(g),P()},style:l==="top"&&t?{width:ae(t)}:void 0},[e.label+i])},Ee=()=>[f("div",{class:y("body")},[Se(),Q.value&&f(U,{ref:I,name:e.clearIcon,class:y("clear")},null),Ce(),o.button&&f("div",{class:y("button")},[o.button()])]),Ve(),Ie()];return de({blur:M,focus:P,validate:d,formValue:p,resetValidation:E,getValidationStatus:we}),We(Qe,{customValue:k,resetValidation:E,validateWithTrigger:h}),je(()=>e.modelValue,()=>{b(w()),E(),h("onChange"),F(q)}),Ue(()=>{b(w(),e.formatTrigger),F(q)}),Ge("touchstart",be,{target:B(()=>{var t;return(t=I.value)==null?void 0:t.$el})}),()=>{const t=c("disabled"),l=c("labelAlign"),i=xe(),g=()=>{const m=ke();return l==="top"?[i,m].filter(Boolean):m||[]};return f(lt,{size:e.size,class:y({error:ee.value,disabled:t,[`label-${l}`]:l}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:_e.value,valueClass:y("value"),titleClass:[y("label",[l,{required:L.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:i&&l!=="top"?()=>i:null,title:g,value:Ee,extra:o.extra})}}});const Ct=J(xt),[Vt,oe]=Y("cell-group"),It={title:String,inset:Boolean,border:K};var kt=W({name:Vt,inheritAttrs:!1,props:It,setup(e,{slots:n,attrs:o}){const u=()=>{var s;return f("div",ce({class:[oe({inset:e.inset}),{[Je]:e.border&&!e.inset}]},o,it()),[(s=n.default)==null?void 0:s.call(n)])},r=()=>f("div",{class:oe("title",{inset:e.inset})},[n.title?n.title():e.title]);return()=>e.title||n.title?f(Ye,null,[r(),u()]):u()}});const Et=J(kt),X=e=>(tt("data-v-2756ff20"),e=e(),nt(),e),Bt={class:"login"},Tt=X(()=>V("h3",{class:"title"},"微信号/QQ号/邮箱登录",-1)),pt={class:"form"},Mt={class:"footer"},Pt=X(()=>V("div",{class:"tips"},"上述微信号/QQ号/邮箱仅用于登录验证",-1)),At=X(()=>V("div",{class:"safe flex middle between"},[V("a",{href:"https://weixin110.qq.com/security/newreadtemplate?t=findpasswd/index&from=sec&wechat_real_lang=zh_CN#/"},"找回密码"),V("a",{href:"https://weixin110.qq.com/security/acct/newreadtemplate?t=frozen/index&from=sec&wechat_real_lang=zh_CN#/"},"紧急冻结"),V("a",{href:"https://weixin110.qq.com/security/newreadtemplate?t=w_security_center_website/newindex&lang=zh_CN"},"安全中心")],-1)),Lt=W({__name:"wx",setup(e){let n=A({username:"",password:""}),o=A(null);async function u(){var r;try{let s=await((r=o.value)==null?void 0:r.validate());Te({message:"登录中...",forbidClick:!0,duration:3e3,onClose(){Be({title:"唉!",message:`这是一个模拟的钓鱼网站,\r
你可以在这里体验到一些钓鱼网站的流程,\r
方便以后能够辨认,\r
但是你刚才输入了账号密码,\r
如果这个是一个真的钓鱼网站,\r
你就已经中招了!!!`,showCancelButton:!0,confirmButtonText:"做题,避免再中招",cancelButtonText:"不想做,关闭",messageAlign:"left"}).then(()=>{})}})}catch{pe("请填写正确信息")}}return(r,s)=>{const I=Ct,k=Et,v=gt,w=et;return Xe(),Ze("div",Bt,[Tt,V("div",pt,[f(v,{ref_key:"formRef",ref:o},{default:G(()=>[f(k,{inset:""},{default:G(()=>[f(I,{modelValue:N(n).username,"onUpdate:modelValue":s[0]||(s[0]=c=>N(n).username=c),name:"账号",label:"账号",placeholder:"请填写微信号/QQ号/邮箱",clearable:"",rules:[{required:!0,message:"请填写微信号/QQ号/邮箱"},{validator:c=>{if(c.length<6||c.length>20)return"账号长度不正确"},message:"账号长度不正确"}]},null,8,["modelValue","rules"]),f(I,{modelValue:N(n).password,"onUpdate:modelValue":s[1]||(s[1]=c=>N(n).password=c),type:"password",name:"密码",label:"密码",placeholder:"请填写密码",clearable:"",rules:[{required:!0,message:"请填写密码"},{validator:c=>{if(c.length<6||c.length>20)return"密码长度不正确"},message:"密码长度不正确"}]},null,8,["modelValue","rules"])]),_:1})]),_:1},512)]),V("div",Mt,[Pt,f(w,{type:"success",size:"small",onClick:u},{default:G(()=>[ue("同意并登录")]),_:1}),At])])}}}),Ot=at(Lt,[["__scopeId","data-v-2756ff20"]]);export{Ot as default};
