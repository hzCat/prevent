import{s as Me}from"./index-Ciscd8vD.js";import{s as Ae,a as Re}from"./index-GUOk77vA.js";import{c as K,m as F,n as P,t as H,u as U,e as ue,b as B,I as D,w as Y,d as qe,f as G,F as de,g as $e,s as ze,a as Fe,h as De,j as Ne,k as Oe,l as We,o as re,C as pe,q as je,r as ie,v as Qe,x as Ue,B as Ge}from"./index-1IMyRTzM.js";import{r as He,u as Ke,B as Ye}from"./index-BFDfGY4n.js";import{i as Je,d as O,c,j as Xe,r as N,k as A,l as Ze,n as et,q as j,s as tt,m as fe,f as ge,F as nt,o as at,a as lt,h as E,w as X,u as Q,p as rt,g as it,_ as ot}from"./index-BUDJbm-d.js";import{a as me,b as st}from"./mount-component-BsIUfqY6.js";let ct=0;function ut(){const e=Je(),{name:n="unknown"}=(e==null?void 0:e.type)||{};return`${n}-${++ct}`}const[dt,R]=K("cell"),he={tag:F("div"),icon:String,size:String,title:P,value:P,label:P,center:Boolean,isLink:Boolean,border:H,iconPrefix:String,valueClass:U,labelClass:U,titleClass:U,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},ft=ue({},he,He);var gt=O({name:dt,props:ft,setup(e,{slots:n}){const o=Ke(),d=()=>{if(n.label||B(e.label))return c("div",{class:[R("label"),e.labelClass]},[n.label?n.label():e.label])},l=()=>{var f;if(n.title||B(e.title)){const h=(f=n.title)==null?void 0:f.call(n);return Array.isArray(h)&&h.length===0?void 0:c("div",{class:[R("title"),e.titleClass],style:e.titleStyle},[h||c("span",null,[e.title]),d()])}},s=()=>{const f=n.value||n.default;if(f||B(e.value))return c("div",{class:[R("value"),e.valueClass]},[f?f():c("span",null,[e.value])])},V=()=>{if(n.icon)return n.icon();if(e.icon)return c(D,{name:e.icon,class:R("left-icon"),classPrefix:e.iconPrefix},null)},k=()=>{if(n["right-icon"])return n["right-icon"]();if(e.isLink){const f=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return c(D,{name:f,class:R("right-icon")},null)}};return()=>{var f;const{tag:h,size:u,center:q,border:T,isLink:L,required:M}=e,C=(f=e.clickable)!=null?f:L,a={center:q,required:!!M,clickable:C,borderless:!T};return u&&(a[u]=!!u),c(h,{class:R(a),role:C?"button":void 0,tabindex:C?0:void 0,onClick:o},{default:()=>{var g;return[V(),l(),s(),k(),(g=n.extra)==null?void 0:g.call(n)]}})}}});const mt=Y(gt),[ht,vt]=K("form"),bt={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:P,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:H,showErrorMessage:H,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var _t=O({name:ht,props:bt,emits:["submit","failed"],setup(e,{emit:n,slots:o}){const{children:d,linkChildren:l}=qe(de),s=a=>a?d.filter(g=>a.includes(g.name)):d,V=a=>new Promise((g,b)=>{const x=[];s(a).reduce((J,$)=>J.then(()=>{if(!x.length)return $.validate().then(z=>{z&&x.push(z)})}),Promise.resolve()).then(()=>{x.length?b(x):g()})}),k=a=>new Promise((g,b)=>{const x=s(a);Promise.all(x.map(_=>_.validate())).then(_=>{_=_.filter(Boolean),_.length?b(_):g()})}),f=a=>{const g=d.find(b=>b.name===a);return g?new Promise((b,x)=>{g.validate().then(_=>{_?x(_):b()})}):Promise.reject()},h=a=>typeof a=="string"?f(a):e.validateFirst?V(a):k(a),u=a=>{typeof a=="string"&&(a=[a]),s(a).forEach(b=>{b.resetValidation()})},q=()=>d.reduce((a,g)=>(a[g.name]=g.getValidationStatus(),a),{}),T=(a,g)=>{d.some(b=>b.name===a?(b.$el.scrollIntoView(g),!0):!1)},L=()=>d.reduce((a,g)=>(g.name!==void 0&&(a[g.name]=g.formValue.value),a),{}),M=()=>{const a=L();h().then(()=>n("submit",a)).catch(g=>{n("failed",{values:a,errors:g}),e.scrollToError&&g[0].name&&T(g[0].name)})},C=a=>{G(a),M()};return l({props:e}),me({submit:M,validate:h,getValues:L,scrollToField:T,resetValidation:u,getValidationStatus:q}),()=>{var a;return c("form",{class:vt(),onSubmit:C},[(a=o.default)==null?void 0:a.call(o)])}}});const yt=Y(_t);function ve(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function wt(e,n){if(ve(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function St(e,n){return new Promise(o=>{const d=n.validator(e,n);if(De(d)){d.then(o);return}o(d)})}function oe(e,n){const{message:o}=n;return Ne(o)?o(e,n):o||""}function Ct({target:e}){e.composing=!0}function se({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function xt(e,n){const o=$e();e.style.height="auto";let d=e.scrollHeight;if(Fe(n)){const{maxHeight:l,minHeight:s}=n;l!==void 0&&(d=Math.min(d,l)),s!==void 0&&(d=Math.max(d,s))}d&&(e.style.height=`${d}px`,ze(o))}function Vt(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function I(e){return[...e].length}function Z(e,n){return[...e].slice(0,n).join("")}const[kt,w]=K("field"),It={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:P,formatter:Function,clearIcon:F("clear"),modelValue:Oe(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:F("focus"),formatTrigger:F("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},Bt=ue({},he,It,{rows:P,type:F("text"),rules:Array,autosize:[Boolean,Object],labelWidth:P,labelClass:U,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var Et=O({name:kt,props:Bt,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:o}){const d=ut(),l=Xe({status:"unvalidated",focused:!1,validateMessage:""}),s=N(),V=N(),k=N(),{parent:f}=We(de),h=()=>{var t;return String((t=e.modelValue)!=null?t:"")},u=t=>{if(B(e[t]))return e[t];if(f&&B(f.props[t]))return f.props[t]},q=A(()=>{const t=u("readonly");if(e.clearable&&!t){const r=h()!=="",i=e.clearTrigger==="always"||e.clearTrigger==="focus"&&l.focused;return r&&i}return!1}),T=A(()=>k.value&&o.input?k.value():e.modelValue),L=A(()=>{var t;const r=u("required");return r==="auto"?(t=e.rules)==null?void 0:t.some(i=>i.required):r}),M=t=>t.reduce((r,i)=>r.then(()=>{if(l.status==="failed")return;let{value:m}=T;if(i.formatter&&(m=i.formatter(m,i)),!wt(m,i)){l.status="failed",l.validateMessage=oe(m,i);return}if(i.validator)return ve(m)&&i.validateEmpty===!1?void 0:St(m,i).then(v=>{v&&typeof v=="string"?(l.status="failed",l.validateMessage=v):v===!1&&(l.status="failed",l.validateMessage=oe(m,i))})}),Promise.resolve()),C=()=>{l.status="unvalidated",l.validateMessage=""},a=()=>n("endValidate",{status:l.status,message:l.validateMessage}),g=(t=e.rules)=>new Promise(r=>{C(),t?(n("startValidate"),M(t).then(()=>{l.status==="failed"?(r({name:e.name,message:l.validateMessage}),a()):(l.status="passed",r(),a())})):r()}),b=t=>{if(f&&e.rules){const{validateTrigger:r}=f.props,i=ie(r).includes(t),m=e.rules.filter(v=>v.trigger?ie(v.trigger).includes(t):i);m.length&&g(m)}},x=t=>{var r;const{maxlength:i}=e;if(B(i)&&I(t)>+i){const m=h();if(m&&I(m)===+i)return m;const v=(r=s.value)==null?void 0:r.selectionEnd;if(l.focused&&v){const y=[...t],S=y.length-+i;return y.splice(v-S,S),y.join("")}return Z(t,+i)}return t},_=(t,r="onChange")=>{const i=t;t=x(t);const m=I(i)-I(t);if(e.type==="number"||e.type==="digit"){const y=e.type==="number";t=Qe(t,y,y)}let v=0;if(e.formatter&&r===e.formatTrigger){const{formatter:y,maxlength:S}=e;if(t=y(t),B(S)&&I(t)>+S&&(t=Z(t,+S)),s.value&&l.focused){const{selectionEnd:p}=s.value,le=Z(i,p);v=I(y(le))-I(le)}}if(s.value&&s.value.value!==t)if(l.focused){let{selectionStart:y,selectionEnd:S}=s.value;if(s.value.value=t,B(y)&&B(S)){const p=I(t);m?(y-=m,S-=m):v&&(y+=v,S+=v),s.value.setSelectionRange(Math.min(y,p),Math.min(S,p))}}else s.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},J=t=>{t.target.composing||_(t.target.value)},$=()=>{var t;return(t=s.value)==null?void 0:t.blur()},z=()=>{var t;return(t=s.value)==null?void 0:t.focus()},W=()=>{const t=s.value;e.type==="textarea"&&e.autosize&&t&&xt(t,e.autosize)},be=t=>{l.focused=!0,n("focus",t),j(W),u("readonly")&&$()},_e=t=>{l.focused=!1,_(h(),"onBlur"),n("blur",t),!u("readonly")&&(b("onBlur"),j(W),Ue())},te=t=>n("clickInput",t),ye=t=>n("clickLeftIcon",t),we=t=>n("clickRightIcon",t),Se=t=>{G(t),n("update:modelValue",""),n("clear",t)},ne=A(()=>{if(typeof e.error=="boolean")return e.error;if(f&&f.props.showError&&l.status==="failed")return!0}),Ce=A(()=>{const t=u("labelWidth"),r=u("labelAlign");if(t&&r!=="top")return{width:re(t)}}),xe=t=>{t.keyCode===13&&(!(f&&f.props.submitOnEnter)&&e.type!=="textarea"&&G(t),e.type==="search"&&$()),n("keypress",t)},ae=()=>e.id||`${d}-input`,Ve=()=>l.status,ke=()=>{const t=w("control",[u("inputAlign"),{error:ne.value,custom:!!o.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(o.input)return c("div",{class:t,onClick:te},[o.input()]);const r={id:ae(),ref:s,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:u("disabled"),readonly:u("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${d}-label`:void 0,onBlur:_e,onFocus:be,onInput:J,onClick:te,onChange:se,onKeypress:xe,onCompositionend:se,onCompositionstart:Ct};return e.type==="textarea"?c("textarea",r,null):c("input",fe(Vt(e.type),r),null)},Ie=()=>{const t=o["left-icon"];if(e.leftIcon||t)return c("div",{class:w("left-icon"),onClick:ye},[t?t():c(D,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},Be=()=>{const t=o["right-icon"];if(e.rightIcon||t)return c("div",{class:w("right-icon"),onClick:we},[t?t():c(D,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Ee=()=>{if(e.showWordLimit&&e.maxlength){const t=I(h());return c("div",{class:w("word-limit")},[c("span",{class:w("word-num")},[t]),ge("/"),e.maxlength])}},Te=()=>{if(f&&f.props.showErrorMessage===!1)return;const t=e.errorMessage||l.validateMessage;if(t){const r=o["error-message"],i=u("errorMessageAlign");return c("div",{class:w("error-message",i)},[r?r({message:t}):t])}},Pe=()=>{const t=u("labelWidth"),r=u("labelAlign"),i=u("colon")?":":"";if(o.label)return[o.label(),i];if(e.label)return c("label",{id:`${d}-label`,for:o.input?void 0:ae(),onClick:m=>{G(m),z()},style:r==="top"&&t?{width:re(t)}:void 0},[e.label+i])},Le=()=>[c("div",{class:w("body")},[ke(),q.value&&c(D,{ref:V,name:e.clearIcon,class:w("clear")},null),Be(),o.button&&c("div",{class:w("button")},[o.button()])]),Ee(),Te()];return me({blur:$,focus:z,validate:g,formValue:T,resetValidation:C,getValidationStatus:Ve}),Ze(pe,{customValue:k,resetValidation:C,validateWithTrigger:b}),et(()=>e.modelValue,()=>{_(h()),C(),b("onChange"),j(W)}),tt(()=>{_(h(),e.formatTrigger),j(W)}),je("touchstart",Se,{target:A(()=>{var t;return(t=V.value)==null?void 0:t.$el})}),()=>{const t=u("disabled"),r=u("labelAlign"),i=Ie(),m=()=>{const v=Pe();return r==="top"?[i,v].filter(Boolean):v||[]};return c(mt,{size:e.size,class:w({error:ne.value,disabled:t,[`label-${r}`]:r}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:Ce.value,valueClass:w("value"),titleClass:[w("label",[r,{required:L.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:i&&r!=="top"?()=>i:null,title:m,value:Le,extra:o.extra})}}});const Tt=Y(Et),[Pt,ce]=K("cell-group"),Lt={title:String,inset:Boolean,border:H};var Mt=O({name:Pt,inheritAttrs:!1,props:Lt,setup(e,{slots:n,attrs:o}){const d=()=>{var s;return c("div",fe({class:[ce({inset:e.inset}),{[Ge]:e.border&&!e.inset}]},o,st()),[(s=n.default)==null?void 0:s.call(n)])},l=()=>c("div",{class:ce("title",{inset:e.inset})},[n.title?n.title():e.title]);return()=>e.title||n.title?c(nt,null,[l(),d()]):d()}});const At=Y(Mt),ee=e=>(rt("data-v-2756ff20"),e=e(),it(),e),Rt={class:"login"},qt=ee(()=>E("h3",{class:"title"},"微信号/QQ号/邮箱登录",-1)),$t={class:"form"},zt={class:"footer"},Ft=ee(()=>E("div",{class:"tips"},"上述微信号/QQ号/邮箱仅用于登录验证",-1)),Dt=ee(()=>E("div",{class:"safe flex middle between"},[E("a",{href:"https://weixin110.qq.com/security/newreadtemplate?t=findpasswd/index&from=sec&wechat_real_lang=zh_CN#/"},"找回密码"),E("a",{href:"https://weixin110.qq.com/security/acct/newreadtemplate?t=frozen/index&from=sec&wechat_real_lang=zh_CN#/"},"紧急冻结"),E("a",{href:"https://weixin110.qq.com/security/newreadtemplate?t=w_security_center_website/newindex&lang=zh_CN"},"安全中心")],-1)),Nt=O({__name:"wx",setup(e){let n=N({username:"",password:""}),o=N(null);async function d(){var l;try{let s=await((l=o.value)==null?void 0:l.validate());Ae({message:"登录中...",forbidClick:!0,duration:3e3,onClose(){Me({title:"唉!",message:`这是一个模拟的钓鱼网站,\r
你可以在这里体验到一些钓鱼网站的流程,\r
方便以后能够辨认,\r
但是你刚才输入了账号密码,\r
如果这个是一个真的钓鱼网站,\r
你就已经中招了!!!`,showCancelButton:!0,confirmButtonText:"做题,避免再中招",cancelButtonText:"不想做,关闭",messageAlign:"left"}).then(()=>{})}})}catch{Re("请填写正确信息")}}return(l,s)=>{const V=Tt,k=At,f=yt,h=Ye;return at(),lt("div",Rt,[qt,E("div",$t,[c(f,{ref_key:"formRef",ref:o},{default:X(()=>[c(k,{inset:""},{default:X(()=>[c(V,{modelValue:Q(n).username,"onUpdate:modelValue":s[0]||(s[0]=u=>Q(n).username=u),name:"账号",label:"账号",placeholder:"请填写微信号/QQ号/邮箱",clearable:"",rules:[{required:!0,message:"请填写微信号/QQ号/邮箱"},{validator:u=>{if(u.length<6||u.length>20)return"账号长度不正确"},message:"账号长度不正确"}]},null,8,["modelValue","rules"]),c(V,{modelValue:Q(n).password,"onUpdate:modelValue":s[1]||(s[1]=u=>Q(n).password=u),type:"password",name:"密码",label:"密码",placeholder:"请填写密码",clearable:"",rules:[{required:!0,message:"请填写密码"},{validator:u=>{if(u.length<6||u.length>20)return"密码长度不正确"},message:"密码长度不正确"}]},null,8,["modelValue","rules"])]),_:1})]),_:1},512)]),E("div",zt,[Ft,c(h,{type:"success",size:"small",onClick:d},{default:X(()=>[ge("同意并登录")]),_:1}),Dt])])}}}),Gt=ot(Nt,[["__scopeId","data-v-2756ff20"]]);export{Gt as default};
